{% extends "base.html" %}

{% block page_content %}
{% load static %}
<!--TODO: make dynamic modal-->
{% load recipes_extras %}

<link rel="stylesheet" type="text/css" href="{% static 'style_recipe.css' %}">
<title>Victor Sun | Recipes</title>

<div id="content">
	<center><h1>Recipes</h1>
	<p>My cooking philosophy is cooking without a recipe. My favourite foods to cook are quick home-style foods that require very little dishes to clean.
		<br> This is a list of 'recipes' with no instructions or quantitative amount of ingredients.</p></center><hr>
	<div class="row center">
		<p>
			<a class="btn btn-primary btn-sm p-1 mb-1" href="/recipes/">Recipes: <i>{{ recipes.count }}</i></a>
			{% for ingredient_name, ingredient_count in ingredients.items %}
				{% if ingredient_name in selected_ingredients %}
					<a class="btn btn-outline-primary btn-sm p-1 m-1" href="/recipes/ingredients/
					{% for query_ingredient in selected_ingredients %}{{query_ingredient}}&{% endfor %}">
						{{ ingredient_name }}: <i>{{ ingredient_count }}</i></a>
				{% else %}
					<a class="btn btn-primary btn-sm p-1 mb-1" href="/recipes/ingredients/
					{% for query_ingredient in selected_ingredients %}{{query_ingredient}}&{% endfor %}{{ ingredient_name }}">
						{{ ingredient_name }}: <i>{{ ingredient_count }}</i></a>
				{% endif %}
			{% endfor %}
		</p>
	</div>
	<div class="row">
	{% for recipe in recipes %}
		<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 text-center py-2"> <!--- card-deck mx-auto --->
			<div class="card mb-2 h-100">
				<img class="card-img-top" src="/media/{{ recipe.img }}" alt="{{ recipe.name }}">
				<div class="card-body d-flex flex-column">
					<h5 class="card-title">{{ recipe.name }}</h5>
					<p class="card-text mt-auto">
					</p>
				</div>
				<div class="card-footer">
					<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modal{{ recipe.pk }}">Read More</button>
<!--					<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modal" onclick="showModal({{ recipe.pk }})">Read More</button>-->
				</div>
			</div>
		</div>

		<!-- Modal -->
		<div id="modal{{ recipe.pk }}" class="modal fade" role="dialog">
			<div class="modal-dialog modal-dialog-centered modal-lg">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<h3>{{ recipe.name }}</h3>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col v-center">
							<img src="/media/{{ recipe.img }}" alt="{{ recipe.name }}" width="250px">
						</div>
						<div class="col box-shift">
							<h5>{{ recipe.cuisine.cuisine_name }} {{ recipe.course.course_name }} dish: </h5>
							<p>{{ recipe.description }}</p>
							<h5>Ingredients:</h5>
							<p>{% for ingredient in recipe.ingredients.all %}
								<li>{{ ingredient.ingredient_name}}</li>
							{% endfor %}</p>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					{{ recipe.date_modified.date_modified }} <br>
					<a class="btn btn-light btn-sm" href="/recipes/{{ recipe.slug }}" role="button">Go to</a>
				</div>
			</div>

			</div>
		</div>
		{% endfor %}

<!--		&lt;!&ndash; Modal &ndash;&gt;-->
<!--		<div id="modal" class="modal fade" role="dialog">-->
<!--			<div class="modal-dialog modal-dialog-centered modal-lg">-->

<!--			&lt;!&ndash; Modal content&ndash;&gt;-->
<!--			<div class="modal-content">-->
<!--				<div class="modal-header">-->
<!--					<h3><div id="recipe-name"></div></h3>-->
<!--					<button type="button" class="close" data-dismiss="modal">&times;</button>-->
<!--				</div>-->
<!--				<div class="modal-body">-->
<!--					<div class="row">-->
<!--						<div class="col v-center" id="recipe-img"></div>-->
<!--						<div class="col box-shift" id="recipe-info"></div>-->
<!--					</div>-->
<!--				</div>-->
<!--				<div class="modal-footer" id="recipe-footer"></div>-->
<!--			</div>-->

<!--			</div>-->
<!--		</div>-->
<!--	</div>-->

</div>

<script>$('#content').hide().fadeIn(1000*1.5);</script>
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>-->
<script src="{% static 'modal.js' %}"></script>

{% endblock %}
